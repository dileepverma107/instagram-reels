<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instagram Reels Sidebar</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: #000;
    }
    
    .instagram-container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .header {
      background-color: #000;
      color: white;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #262626;
    }
    
    .header-title {
      font-weight: 600;
      font-size: 16px;
    }
    
    .reels-container {
      flex: 1;
      overflow: hidden;
      position: relative;
    }
    
    .reel {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transition: transform 0.5s ease-out;
    }
    
    .reel-content {
      flex: 1;
      overflow: hidden;
      position: relative;
      background-color: #000;
    }
    
    .reel-video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    .reel-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 10px;
      color: white;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    }
    
    .reel-username {
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .reel-caption {
      font-size: 14px;
      margin-bottom: 10px;
    }
    
    .reel-actions {
      display: flex;
      flex-direction: column;
      position: absolute;
      right: 10px;
      bottom: 80px;
    }
    
    .action-button {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      margin: 10px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }
    
    .action-count {
      font-size: 12px;
      margin-top: 2px;
    }
    
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      text-align: center;
    }
    
    #debug-info {
      position: fixed;
      bottom: 10px;
      left: 10px;
      color: rgba(255, 255, 255, 0.5);
      font-size: 10px;
      max-width: 80%;
      z-index: 999;
    }
  </style>
</head>
<body>
  <div class="instagram-container">
    <div class="header">
      <div class="header-title">Instagram Reels</div>
    </div>
    <div class="reels-container" id="reelsContainer">
      <div class="loading" id="loading">
        Loading reels...
      </div>
    </div>
    <div id="debug-info"></div>
  </div>

  <script>
    function log(message) {
      console.log(message);
      const debugInfo = document.getElementById('debug-info');
      if (debugInfo) {
        const time = new Date().toLocaleTimeString();
        debugInfo.innerHTML += `[${time}] ${message}<br>`;
      }
    }
    
    log('Sidebar loaded');
    
    // Sample reels data
    const reelsData = [
      {
        id: 1,
        username: 'instagram_official',
        caption: 'Check out our latest features! #instagram #reels',
        videoUrl: 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4',
        likes: 28456,
        comments: 1823
      },
      {
        id: 2,
        username: 'travel_enthusiast',
        caption: 'Exploring beautiful destinations around the world! #travel #adventure',
        videoUrl: 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4',
        likes: 15678,
        comments: 942
      },
      {
        id: 3,
        username: 'food_lover',
        caption: 'Delicious recipes you need to try today! #foodie #cooking',
        videoUrl: 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4',
        likes: 21345,
        comments: 1156
      },
      {
        id: 4,
        username: 'fitness_coach',
        caption: 'Quick and effective workout routine for busy people #fitness #health',
        videoUrl: 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4',
        likes: 18976,
        comments: 834
      },
      {
        id: 5,
        username: 'tech_reviewer',
        caption: 'First look at the latest smartphone release! #tech #gadgets',
        videoUrl: 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4',
        likes: 12567,
        comments: 723
      }
    ];

    const reelsContainer = document.getElementById('reelsContainer');
    const loading = document.getElementById('loading');
    let currentReelIndex = 0;
    let reelElements = [];

    // Load reels
    function loadReels() {
      log('Loading reels');
      loading.style.display = 'none';
      
      reelsData.forEach((reel, index) => {
        log(`Creating reel ${index + 1}`);
        const reelElement = document.createElement('div');
        reelElement.className = 'reel';
        reelElement.style.transform = `translateY(${index === 0 ? '0' : '100%'})`;
        
        reelElement.innerHTML = `
          <div class="reel-content">
            <video class="reel-video" src="${reel.videoUrl}" loop playsinline></video>
            <div class="reel-info">
              <div class="reel-username">@${reel.username}</div>
              <div class="reel-caption">${reel.caption}</div>
            </div>
          </div>
          <div class="reel-actions">
            <button class="action-button">
              ‚ù§Ô∏è
              <span class="action-count">${reel.likes}</span>
            </button>
            <button class="action-button">
              üí¨
              <span class="action-count">${reel.comments}</span>
            </button>
            <button class="action-button">
              üì§
            </button>
          </div>
        `;
        
        reelsContainer.appendChild(reelElement);
        reelElements.push(reelElement);
        
        // Add video events
        const video = reelElement.querySelector('video');
        
        // Auto-play first video
        if (index === 0) {
          video.autoplay = true;
          video.muted = true;
          video.play().catch(e => log(`Error playing video: ${e.message}`));
        }
        
        // Add video ended event to auto-scroll to next reel
        video.addEventListener('ended', () => {
          log('Video ended, scrolling to next reel');
          scrollToNextReel();
        });
        
        // Add error handling
        video.addEventListener('error', () => {
          log(`Error loading video for reel ${index + 1}`);
          if (index === currentReelIndex) {
            scrollToNextReel();
          }
        });
      });
    }

    // Scroll to the next reel
    function scrollToNextReel() {
      if (currentReelIndex < reelElements.length - 1) {
        log(`Scrolling from reel ${currentReelIndex + 1} to ${currentReelIndex + 2}`);
        
        // Pause current video
        const currentVideo = reelElements[currentReelIndex].querySelector('video');
        currentVideo.pause();
        
        currentReelIndex++;
        
        // Update position of all reel elements
        reelElements.forEach((reel, index) => {
          const offset = index - currentReelIndex;
          reel.style.transform = `translateY(${offset * 100}%)`;
        });
        
        // Play the next video
        const nextVideo = reelElements[currentReelIndex].querySelector('video');
        nextVideo.currentTime = 0;
        nextVideo.play().catch(e => log(`Error playing video: ${e.message}`));
      } else {
        log('Reached last reel, looping back to first');
        currentReelIndex = -1;  // Will be incremented to 0 in the next call
        scrollToNextReel();
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      log('DOM content loaded');
      loadReels();
      
      // Add keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowDown' || e.key === 'j') {
          scrollToNextReel();
        } else if (e.key === 'ArrowUp' || e.key === 'k') {
          if (currentReelIndex > 0) {
            // Go to previous reel
            const currentVideo = reelElements[currentReelIndex].querySelector('video');
            currentVideo.pause();
            
            currentReelIndex--;
            
            reelElements.forEach((reel, index) => {
              const offset = index - currentReelIndex;
              reel.style.transform = `translateY(${offset * 100}%)`;
            });
            
            const prevVideo = reelElements[currentReelIndex].querySelector('video');
            prevVideo.currentTime = 0;
            prevVideo.play().catch(e => log(`Error playing video: ${e.message}`));
          }
        }
      });
    });
    
    // Initialize immediately if already loaded
    if (document.readyState !== 'loading') {
      log('Document already loaded, initializing immediately');
      loadReels();
    }
  </script>
</body>
</html> 